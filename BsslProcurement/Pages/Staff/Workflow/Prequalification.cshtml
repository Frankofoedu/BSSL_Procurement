@page
@model BsslProcurement.Pages.Staff.Workflow.PrequalificationModel
@{
    ViewData["Title"] = "Prequalification Workflow";
    Layout = "~/Pages/Shared/_Layout.cshtml";
}

<div class="row my-3">
    <div class="col-md-2"></div>
    <div class="col-md-8">
        <div class="panel panel-login">
            <div class="panel-heading">
                <div class="row">
                    <p class="header-text">Current Prequalification Workflow</p>
                </div>
                <hr>
            </div>

            @if (!string.IsNullOrWhiteSpace(Model.Message))
            {
                <div class="alert alert-success alert-dismissable fade show">
                    <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    @Model.Message
                </div>
            }
            @if (!string.IsNullOrWhiteSpace(Model.Error))
            {
                <div class="alert alert-danger alert-dismissable fade show">
                    <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    @Model.Error
                </div>
            }

            <div class="mt-1">
                <table class="table table-responsive-sm table-striped">
                    <thead>
                        <tr class="table-primary">
                            <th>Step</th>
                            <th>Description</th>
                            <th>For Specific<br />Staff</th>
                            <th>Staff<br /> Code</th>
                            <th>Staff<br /> Name</th>
                        </tr>
                    </thead>
                    <tbody>
                        @for (int i = 0; i < Model.currentPrequalificationWorkflows.Count; i++)
                        {
                            var item = Model.currentPrequalificationWorkflows[i];
                        <tr>
                            <td>@item.Step</td>
                            <td>@item.Description</td>
                            <td>@item.ToPersonOrAssign</td>
                            <td>@item.StaffToAssign.StaffCode</td>
                            <td>@item.StaffToAssign.Name</td>
                        </tr>
                        }
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>

<div class="row mt-5">
    <div class="col-md-2"></div>
    <div class="col-md-8">
        <form method="post" class="panel panel-login">
            <div class="panel-heading">
                <div class="row">
                    <p class="header-text">New Prequalification Workflow</p>
                </div>
                <hr>
            </div>
            <div asp-validation-summary="All" class="text-danger"></div>

        <div class="mt-1">
            <table class="table table-responsive-sm table-striped">
                <thead>
                    <tr class="table-primary">
                        <th>Step</th>
                        <th>Description</th>
                        <th>For Specific<br />Staff</th>
                        <th>Staff<br /> Code</th>
                        <th>Staff<br /> Name</th>
                    </tr>
                </thead>
                <tbody>
                    @for (int i = 0; i < 1; i++)
                    {
                        var item = Model.newPrequalificationWorkflows[i];
                    <tr>
                        <td>@(i + 1) <input type="hidden" asp-for="newPrequalificationWorkflows[i].Step" value="@(i+1)" /></td>
                        <td><input type="text" asp-for="newPrequalificationWorkflows[i].Description" class="form-control" /></td>
                        <td><input type="checkbox" asp-for="newPrequalificationWorkflows[i].ToPersonOrAssign" class="checkbox" /></td>
                        <td><input type="hidden" class="staffIdInput" asp-for="newPrequalificationWorkflows[i].StaffId"/><input type="text" class="staffCodeInput form-control" /></td>
                        <td><input type="text" readonly="readonly" class="staffNameInput"/></td>
                    </tr>
                    }
                </tbody>
            </table>


            <div class="form-group">
                <div class="row">
                    <div class="col-sm-3"> </div>
                    <div class="col-sm-6">
                        <button class="btnMore btn btn-outline-primary">New Step</button>
                        <button type="submit" class="btnSubmit btn btn-primary ml-sm-2">Save</button>
                    </div>
                </div>
            </div>
        </div>
        </form>
    </div>
</div>


@section Scripts {
    @{await Html.RenderPartialAsync("_ValidationScriptsPartial");}
}
